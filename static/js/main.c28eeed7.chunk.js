(this.webpackJsonppwd_manager=this.webpackJsonppwd_manager||[]).push([[0],{140:function(e,t,a){e.exports=a(290)},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},149:function(e,t,a){},157:function(e,t){},159:function(e,t){},192:function(e,t){},193:function(e,t){},236:function(e,t,a){},237:function(e,t,a){},241:function(e,t,a){},268:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){},273:function(e,t,a){},276:function(e,t,a){},279:function(e,t,a){},280:function(e,t,a){},281:function(e,t,a){},282:function(e,t,a){},283:function(e,t,a){},290:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(32),i=a.n(n),o=(a(145),a(6)),c=a(7),l=a(9),p=a(8),u=a(41),d=a(38),m=(a(146),a(147),a(2)),h=a.n(m),f=a(13),v=a(18),g=(a(149),a(12)),b=a(3),w=a(21),y=a(29),E=a(131),S=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],O=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],k=[1,2,3,4,5,6,7,8,9,0],C=["!",'"',"#","$","%","&","`","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","{","|","}","~"];function j(e,t){return new Promise(function(){var a=Object(f.a)(h.a.mark((function a(r,s){var n,i;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x(e,t.name+t.account+t.version+t.length+t.rndBytes);case 2:(n=a.sent)&&(i=M(n,t.length,t.lowercase,t.uppercase,t.numbers,t.specialChars,t.whitelist,t.blacklist),r(i.join("")));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}function x(e,t){return new Promise((function(a,r){y.pbkdf2(e,t,1e5,128,"sha256",(function(e,t){e&&a(null),a(t)}))}))}function M(e,t,a,r,s,n,i,o){var c=E(e),l=function(e,t,a,r,s,n){for(var i=new Array(e),o=0;o<i.length;o++)i[o]="";if(t){for(var c=n.random();""!==i[Math.floor(c*e)];)c=n.random();""===i[Math.floor(c*e)]&&(i[Math.floor(c*e)]="lc")}if(a){for(var l=n.random();""!==i[Math.floor(l*e)];)l=n.random();""===i[Math.floor(l*e)]&&(i[Math.floor(l*e)]="uc")}if(r){for(var p=n.random();""!==i[Math.floor(p*e)];)p=n.random();""===i[Math.floor(p*e)]&&(i[Math.floor(p*e)]="num")}if(s){for(var u=n.random();""!==i[Math.floor(u*e)];)u=n.random();""===i[Math.floor(u*e)]&&(i[Math.floor(u*e)]="sc")}return i}(t,a,r,s,n,c),p=function(e,t,a,r){var s=[];e&&(s=s.concat(S));t&&(s=s.concat(O));a&&(s=s.concat(k));r&&(s=s.concat(C));e||t||a||r||(s=s.concat(S));return s}(a,r,s,n);!function(e,t){var a,r=Object(w.a)(e);try{for(r.s();!(a=r.n()).done;){var s=a.value;t.splice(t.indexOf(s),1)}}catch(n){r.e(n)}finally{r.f()}}(o,p);for(var u=0;u<l.length;u++){var d=c.random();switch(l[u]){case"":l[u]=p[Math.floor(d*p.length)];break;case"lc":l[u]=S[Math.floor(d*S.length)];break;case"uc":l[u]=O[Math.floor(d*O.length)];break;case"num":l[u]=k[Math.floor(d*k.length)];break;case"sc":l[u]=i[Math.floor(d*i.length)]}}return l}var N,I=["!",'"',"#","$","%","&","`","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","{","|","}","~"],P={position:"bottom",event:"hover",showDelay:1e3,hideDelay:0},D=(s.a.Component,function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={loginVisible:!1,registerVisible:!1},r}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"home"})}}]),a}(s.a.Component)),T=(a(236),a(237),a(14));function L(e){return{type:"LOGIN_USER",payload:e}}function B(e){return{type:"LOGOUT_USER",payload:e}}function U(e){return{type:"ADD_SERVICE",payload:e}}function A(e){return{type:"CHANGE_SERVICE",payload:e}}function V(e){return{type:"DELETE_SERVICE",payload:e}}function _(e){return{type:"SHOW_MESSAGE",payload:e}}function H(e){return new Promise((function(t,a){var r=N.transaction(["service"],"readwrite").objectStore("service").put(e);r.onsuccess=function(e){t(e.target.result)},r.onerror=function(e){console.error("error."),a()}}))}function R(e){return new Promise((function(t,a){var r=N.transaction(["service"],"readwrite").objectStore("service").delete(e);r.onsuccess=function(e){t(!0)},r.onerror=function(e){a()}}))}function W(e){N=e}var F=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).handleChange=function(e){var t=e.target;r.setState(Object(v.a)({},t.name,t.value))},r.handleEnter=function(e){e&&e.which&&13===e.which&&r.startOffline()},r.startOffline=Object(f.a)(h.a.mark((function e(){var t,a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===r.state.password){e.next=21;break}return t={username:"offline",password:r.state.password,isAuthenticated:!0,clientSessionProof:"",isOfflineMode:!0},e.prev=2,e.next=5,new Promise((function(e,t){var a;window.indexedDB||t();var r=window.indexedDB.open("services",1);r.onerror=function(e){console.log("error: "),t()},r.onsuccess=function(t){a=r.result,e(a)},r.onupgradeneeded=function(e){(a=e.target.result).createObjectStore("service",{keyPath:"id",autoIncrement:!0})}}));case 5:if(!(a=e.sent)){e.next=16;break}return W(a),e.next=10,new Promise((function(e,t){var a=N.transaction("service").objectStore("service"),r=[];a.openCursor().onsuccess=function(t){var a=t.target.result;if(a){var s={id:a.key,name:a.value.name,url:a.value.url,account:a.value.account,version:a.value.version,length:a.value.length,rndBytes:a.value.rndBytes,lowercase:a.value.lowercase,uppercase:a.value.uppercase,numbers:a.value.numbers,specialChars:a.value.specialChars,whitelist:a.value.whitelist,blacklist:a.value.blacklist};r.push(s),a.continue()}else e(r)}}));case 10:s=e.sent,r.props.loginUser(t),r.props.setServices(s),r.setState({password:""}),r.props.hideModal("passwordDialogVisible"),r.props.history.push("/services");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.error("error",e.t0);case 21:case"end":return e.stop()}}),e,null,[[2,18]])}))),r.state={password:""},r}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"login",onKeyUp:this.handleEnter},s.a.createElement("div",{className:"p-inputgroup mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon"},s.a.createElement("i",{className:"pi pi-key"})),s.a.createElement(g.InputText,{type:"password",value:this.state.password,name:"password",onChange:this.handleChange,placeholder:"Password"})),s.a.createElement(b.Button,{label:this.props.buttonLabel,icon:"pi pi-unlock",onClick:this.startOffline}))}}]),a}(s.a.Component),G=Object(T.b)(null,(function(e){return{loginUser:function(t){return e(L(t))},setServices:function(t){return e({type:"SET_SERVICES",payload:t})}}}))(Object(d.f)(F)),J=a(30),K=a(11),Z=(a(241),a(22)),q=a(20),$=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).handleChange=function(e){var t=e.target;r.setState(Object(v.a)({},t.name,t.value))},r.handleEnter=function(e){e&&e.which&&13===e.which&&r.login()},r.login=Object(f.a)(h.a.mark((function e(){var t,a,s,n,i,o,c,l,p,u,d,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("production"),console.log("http://localhost/login"),""===r.state.username||""===r.state.password){e.next=28;break}return e.prev=3,t=Z.generateEphemeral(),e.next=7,q.post("/login",{step:"1",username:r.state.username,clientPublicEphemeral:t.public},{headers:{"Content-Type":"application/json"}});case 7:if(!((a=e.sent)&&a.data&&a.data.stepOneComplete)){e.next=20;break}return e.next=11,r.generatePBKDF2Hash(r.state.password,a.data.salt+r.state.username);case 11:return s=e.sent,n=Z.deriveSession(t.secret,a.data.serverEphemeral,a.data.salt,r.state.username,s.toString("hex")),e.next=15,q.post("/login",{step:"2",username:r.state.username,clientSessionProof:n.proof},{headers:{"Content-Type":"application/json"}});case 15:if(i=e.sent,console.log(i.data),i&&i.data&&i.data.stepTwoComplete){Z.verifySession(t.public,n,i.data.serverSessionProof),(o=Object(K.a)({},r.state)).mail=a.data.mail,o.salt=a.data.salt,o.isAuthenticated=!0,o.isOfflineMode=!1,o.clientSessionProof=n.proof,r.props.loginUser(o),c=Object(w.a)(i.data.services);try{for(c.s();!(l=c.n()).done;){1===(p=l.value).lowercase?p.lowercase=!0:p.lowercase=!1,1===p.uppercase?p.uppercase=!0:p.uppercase=!1,1===p.numbers?p.numbers=!0:p.numbers=!1,1===p.specialChars?p.specialChars=!0:p.specialChars=!1,p.whitelist=Object(J.a)(I),u=Object(w.a)(p.blacklist);try{for(u.s();!(d=u.n()).done;)m=d.value,p.whitelist.splice(p.whitelist.indexOf(m),1)}catch(h){u.e(h)}finally{u.f()}r.props.addService(p)}}catch(h){c.e(h)}finally{c.f()}r.setState({username:"",password:""}),r.props.hideModal("loginVisible"),r.props.history.push("/services"),r.props.showMessage({severity:"success",summary:"Success",detail:"Login successful!"})}else r.props.showMessage({severity:"error",summary:"Login failed!",detail:"Wrong Username/Password."});e.next=21;break;case 20:r.props.showMessage({severity:"error",summary:"Login failed!",detail:"Wrong Username/Password."});case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),r.props.showMessage({severity:"error",summary:"Login failed!",detail:"Internal Server Error."});case 26:e.next=29;break;case 28:r.props.showMessage({severity:"error",summary:"Login failed!",detail:"Username or password is missing."});case 29:case"end":return e.stop()}}),e,null,[[3,23]])}))),r.generatePBKDF2Hash=function(e,t){return new Promise((function(a,r){y.pbkdf2(e,t,1e5,32,"sha256",(function(e,t){e&&a(null),a(t)}))}))},r.state={username:"",password:""},r}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"login",onKeyUp:this.handleEnter},s.a.createElement("div",{className:"p-inputgroup mt-3 mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon"},s.a.createElement("i",{className:"pi pi-user"})),s.a.createElement(g.InputText,{type:"text",value:this.state.username,name:"username",onChange:this.handleChange,placeholder:"Username"})),s.a.createElement("div",{className:"p-inputgroup mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon"},s.a.createElement("i",{className:"pi pi-key"})),s.a.createElement(g.InputText,{type:"password",value:this.state.password,name:"password",onChange:this.handleChange,placeholder:"Password"})),s.a.createElement(b.Button,{label:"Login",icon:"pi pi-unlock",onClick:this.login}))}}]),a}(s.a.Component),z=Object(T.b)(null,(function(e){return{loginUser:function(t){return e(L(t))},addService:function(t){return e(U(t))},showMessage:function(t){return e(_(t))}}}))(Object(d.f)($)),Y=(a(268),function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).handleChange=function(e){var t=e.target;r.setState(Object(v.a)({},t.name,t.value))},r.register=Object(f.a)(h.a.mark((function e(){var t,a,s,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r.state.username){e.next=3;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Please type in a username."}),e.abrupt("return");case 3:if(r.state.username.match(/^[a-zA-Z]{0,20}$/)){e.next=6;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Your username does not meet the requirements."}),e.abrupt("return");case 6:if(""!==r.state.mail){e.next=9;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Please type in your mail address."}),e.abrupt("return");case 9:if(r.state.mail.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)){e.next=12;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"The format of the mail is not correct."}),e.abrupt("return");case 12:if(""!==r.state.password){e.next=15;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Please type in a password."}),e.abrupt("return");case 15:if(""!==r.state.passwordMatch){e.next=18;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Please confirm your password."}),e.abrupt("return");case 18:if(r.state.password.match(/^(?=.*[0-9])(?=.*[!"#$%&`()*+,-./:;<=>?@[\\\]^{|}~])(?=.*[A-Z])[a-zA-Z0-9!"#$%&`()*+,-./:;<=>?@[\\\]^{|}~]{8,}$/)){e.next=21;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Password is to weak."}),e.abrupt("return");case 21:if(r.state.password===r.state.passwordMatch){e.next=24;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Passwords do not match."}),e.abrupt("return");case 24:return e.prev=24,t=Z.generateSalt(),e.next=28,r.generatePBKDF2Hash(r.state.password,t+r.state.username);case 28:return a=e.sent,s=Z.deriveVerifier(a.toString("hex")),e.next=32,q.post("/register",{username:r.state.username,email:r.state.mail,salt:t,verifier:s},{headers:{"Content-Type":"application/json"}});case 32:(n=e.sent)&&n.data&&n.data.registered?(r.setState({username:"",mail:"",password:"",passwordMatch:""}),r.props.hideModal("registerVisible"),r.props.showModal("loginVisible"),r.props.history.push("/login"),r.props.showMessage({severity:"success",summary:"Registration succesful",detail:"Please sign in to your account."})):r.props.showMessage({severity:"error",summary:"Error",detail:"Registration not succesful."}),e.next=39;break;case 36:e.prev=36,e.t0=e.catch(24),r.props.showMessage({severity:"error",summary:"Error",detail:"Internal Server Error."});case 39:case"end":return e.stop()}}),e,null,[[24,36]])}))),r.generatePBKDF2Hash=function(e,t){return new Promise((function(a,r){y.pbkdf2(e,t,1e5,32,"sha256",(function(e,t){e&&a(null),a(t)}))}))},r.state={username:"",mail:"",password:"",passwordMatch:""},r}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"register"},s.a.createElement("div",{className:"p-inputgroup mt-3 mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon"},s.a.createElement("i",{className:"pi pi-user"})),s.a.createElement(g.InputText,{type:"text",value:this.state.username,name:"username",onChange:this.handleChange,placeholder:"Username"})),s.a.createElement("div",{className:"p-inputgroup mt-3 mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon"},"@"),s.a.createElement(g.InputText,{type:"mail",value:this.state.mail,name:"mail",onChange:this.handleChange,placeholder:"E-Mail"})),s.a.createElement("div",{className:"p-inputgroup mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon"},s.a.createElement("i",{className:"pi pi-key"})),s.a.createElement(g.InputText,{type:"password",value:this.state.password,name:"password",onChange:this.handleChange,placeholder:"Password"})),s.a.createElement("div",{className:"p-inputgroup mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon"},s.a.createElement("i",{className:"pi pi-key"})),s.a.createElement(g.InputText,{type:"password",value:this.state.passwordMatch,name:"passwordMatch",onChange:this.handleChange,placeholder:"Comfirm Password"})),s.a.createElement(b.Button,{label:"Register",icon:"pi pi-sign-in",onClick:this.register}))}}]),a}(s.a.Component)),X=Object(T.b)(null,(function(e){return{showMessage:function(t){return e(_(t))}}}))(Object(d.f)(Y)),Q=a(37),ee=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).showModal=function(e){r.setState(Object(v.a)({},e,!0))},r.hideModal=function(e){r.setState(Object(v.a)({},e,!1))},r.logout=function(){r.props.logoutUser({}),r.props.history.push("/")},r.state={loginVisible:!1,registerVisible:!1,passwordDialogVisible:!1},r}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("header",{className:"container-fluid header"},s.a.createElement("div",{className:"row header-row"},this.props.isAuthenticated?s.a.createElement("div",{className:"col-7 col-sm-7 col-md-8 col-lg-9 col-xl-10"},s.a.createElement(b.Button,{label:"Home",onClick:function(){e.props.history.push("/")}}),s.a.createElement(b.Button,{label:"Services",onClick:function(){e.props.history.push("/services")}})):s.a.createElement("div",{className:"col-4 col-sm-5 col-md-7 col-lg-8 col-xl-9"},s.a.createElement(b.Button,{label:"Home",onClick:function(){e.props.history.push("/")}})),this.props.isAuthenticated?s.a.createElement("div",{className:"headerColRight col-5 col-sm-5 col-md-4 col-lg-3 col-xl-2 text-right"},this.props.isOfflineMode?"":s.a.createElement(b.Button,{label:"User",icon:"pi pi-user",onClick:function(){e.props.history.push("/user")}}),s.a.createElement(b.Button,{label:"Logout",icon:"pi pi-sign-out",onClick:this.logout})):s.a.createElement("div",{className:"headerColRight col-8 col-sm-7 col-md-5 col-lg-4 col-xl-3 text-right"},s.a.createElement(b.Button,{label:"Offline",icon:"pi pi-sign-in",onClick:function(t){return e.setState({passwordDialogVisible:!0})}}),s.a.createElement(b.Button,{label:"Sign in",icon:"pi pi-sign-in",onClick:function(t){return e.setState({loginVisible:!0})}}),s.a.createElement(b.Button,{label:"Register",onClick:function(t){return e.setState({registerVisible:!0})}})),s.a.createElement(Q.Dialog,{header:"Offline Mode",visible:this.state.passwordDialogVisible,modal:!0,onHide:function(){return e.setState({passwordDialogVisible:!1})}},s.a.createElement(G,{buttonLabel:"Offline",showModal:this.showModal,hideModal:this.hideModal})),s.a.createElement(Q.Dialog,{header:"Sign in",visible:this.state.loginVisible,modal:!0,onHide:function(){return e.setState({loginVisible:!1})}},s.a.createElement(z,{showModal:this.showModal,hideModal:this.hideModal})),s.a.createElement(Q.Dialog,{header:"Register",visible:this.state.registerVisible,modal:!0,onHide:function(){return e.setState({registerVisible:!1})}},s.a.createElement(X,{showModal:this.showModal,hideModal:this.hideModal}))))}}]),a}(s.a.Component),te=Object(T.b)((function(e){return{isAuthenticated:e.user.isAuthenticated,isOfflineMode:e.user.isOfflineMode}}),(function(e){return{logoutUser:function(t){return e(B(t))}}}))(Object(d.f)(ee)),ae=(a(271),s.a.Component,a(272),a(273),a(134)),re=a(135),se=(a(276),a(52)),ne=a(136),ie=(a(279),function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).handleItemHighlightWhite=function(e){if(r.state.highlight_white){var t=r.state.highlight_white;t.className="picklist-item",r.setState({highlight_white:t})}e.target.className="picklist-item pickList-item-highlight",r.setState({highlight_white:e.target})},r.handleItemHighlightBlack=function(e){if(r.state.highlight_black){var t=r.state.highlight_black;t.className="picklist-item",r.setState({highlight_black:t})}e.target.className="picklist-item pickList-item-highlight",r.setState({highlight_black:e.target})},r.handleSingleItemWhiteBlack=function(){if(r.state.highlight_white){var e=r.state.source,t=r.state.target;switch(r.state.highlight_white.innerHTML){case"&amp;":e.splice(e.indexOf("&"),1),t.push("&");break;case"&lt;":e.splice(e.indexOf("<"),1),t.push("<");break;case"&gt;":e.splice(e.indexOf(">"),1),t.push(">");break;default:e.splice(e.indexOf(r.state.highlight_white.innerHTML),1),t.push(r.state.highlight_white.innerHTML)}r.setState({source:e,target:t,highlight_white:null},(function(){r.handleOnChange()}))}},r.handleSingleItemBlackWhite=function(){if(r.state.highlight_black){var e=r.state.source,t=r.state.target;switch(r.state.highlight_black.innerHTML){case"&amp;":t.splice(t.indexOf("&"),1),e.push("&");break;case"&lt;":t.splice(t.indexOf("<"),1),e.push("<");break;case"&gt;":t.splice(t.indexOf(">"),1),e.push(">");break;default:t.splice(t.indexOf(r.state.highlight_black.innerHTML),1),e.push(r.state.highlight_black.innerHTML)}r.setState({source:e,target:t,highlight_black:null},(function(){r.handleOnChange()}))}},r.handleChangeAllItems=function(e){if(e&&r.state.source.length>0){var t=r.state.source;r.setState({source:[],target:t},(function(){r.handleOnChange()}))}else!e&&r.state.target.length>0&&r.setState({source:r.state.target,target:r.state.source},(function(){r.handleOnChange()}))},r.handleOnChange=function(){r.props.handleCharListChanges(r.state.source,r.state.target)},r.props.newService?r.state={source:[],target:[],highlight_white:null,highlight_black:null}:r.state={source:r.props.whitelist,target:r.props.blacklist,highlight_white:null,highlight_black:null},r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({source:this.props.whitelist})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"pickList-container"},s.a.createElement("div",{className:"pickList picklist-whitelist"},s.a.createElement("div",{className:"pickList-header"},"WhiteList"),s.a.createElement("div",{className:"pickList-body"},s.a.createElement("ul",{className:"pickList-list"},this.state.source.map((function(t){return s.a.createElement("li",{key:t,className:"picklist-item",onClick:e.handleItemHighlightWhite},t)}))))),s.a.createElement("div",{className:"pickList-button-container"},s.a.createElement(b.Button,{className:"pickList-button",icon:"pi pi-angle-right",onClick:this.handleSingleItemWhiteBlack}),s.a.createElement(b.Button,{className:"pickList-button",icon:"pi pi-angle-double-right",onClick:function(){e.handleChangeAllItems(!0)}}),s.a.createElement(b.Button,{className:"pickList-button",icon:"pi pi-angle-left",onClick:this.handleSingleItemBlackWhite}),s.a.createElement(b.Button,{className:"pickList-button",icon:"pi pi-angle-double-left",onClick:function(){e.handleChangeAllItems(!1)}})),s.a.createElement("div",{className:"pickList picklist-blacklist"},s.a.createElement("div",{className:"pickList-header"},"BlackList"),s.a.createElement("div",{className:"pickList-body"},s.a.createElement("ul",{className:"pickList-list"},this.state.target.map((function(t){return s.a.createElement("li",{key:t,className:"picklist-item",onClick:e.handleItemHighlightBlack},t)}))))))}}]),a}(s.a.Component)),oe=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;if(Object(o.a)(this,a),(r=t.call(this,e)).handleChange=function(e){var t=e.target;"version"===t.name?r.setState(Object(v.a)({},t.name,parseInt(t.value))):r.setState(Object(v.a)({},t.name,t.value))},r.onChangeSlider=function(e){var t;t=e.target&&"INPUT"===e.target.nodeName?parseInt(e.target.value):e.value,r.setState({length:t})},r.handleSubmit=Object(f.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r.state.name&&" "!==r.state.name){e.next=3;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Please enter a service name."}),e.abrupt("return");case 3:if(r.state.lowercase||r.state.uppercase||r.state.numbers||r.state.specialChars){e.next=6;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Please select at least one password component."}),e.abrupt("return");case 6:if(!r.props.newService){e.next=14;break}return r.state.rndBytes=y.randomBytes(16).toString("hex"),e.next=10,r.sendSaveRequest(r.props.newService);case 10:(t=e.sent)&&t.id?(r.props.addService(Object(K.a)(Object(K.a)({},r.state),{},{id:t.id})),r.props.showMessage({severity:"success",summary:"Success",detail:"Service added!"})):r.props.showMessage({severity:"error",summary:"Error",detail:"Service could not be added!"}),e.next=18;break;case 14:return e.next=16,r.sendSaveRequest(!1);case 16:(a=e.sent)&&a.saved?(r.props.changeService(r.state),r.props.showMessage({severity:"success",summary:"Success",detail:"Service changed!"})):r.props.showMessage({severity:"error",summary:"Error",detail:"Service could not be changed!"});case 18:r.props.handleDialogHide();case 19:case"end":return e.stop()}}),e)}))),r.sendSaveRequest=function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(f.a)(h.a.mark((function e(a,s){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.post("/service/save",Object(K.a)(Object(K.a)({username:r.props.username},r.state),{},{newService:t,clientSessionProof:r.props.clientSessionProof}),{headers:{"Content-Type":"application/json"}});case 3:(n=e.sent)&&n.data&&n.data.saved?a(n.data):a(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleSubmitOffline=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r.state.name&&" "!==r.state.name){e.next=3;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Please enter a service name."}),e.abrupt("return");case 3:if(r.state.lowercase||r.state.uppercase||r.state.numbers||r.state.specialChars){e.next=6;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Please select at least one password component."}),e.abrupt("return");case 6:if(e.prev=6,!r.props.newService){e.next=16;break}return r.state.rndBytes=y.randomBytes(16).toString("hex"),e.next=11,H(r.state);case 11:t=e.sent,r.props.addService(Object(K.a)(Object(K.a)({},r.state),{},{id:t})),r.props.showMessage({severity:"success",summary:"Success",detail:"Service added!"}),e.next=20;break;case 16:return e.next=18,H(r.state);case 18:r.props.changeService(r.state),r.props.showMessage({severity:"success",summary:"Success",detail:"Service changed!"});case 20:r.props.handleDialogHide(),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(6),r.props.showMessage({severity:"error",summary:"Error",detail:"Service could not be saved!"});case 26:case"end":return e.stop()}}),e,null,[[6,23]])}))),r.handleCharListChanges=function(e,t){r.setState({whitelist:e}),r.setState({blacklist:t})},r.props.newService)r.state={name:"",url:"",account:"",version:1,length:8,rndBytes:"",lowercase:!0,uppercase:!1,numbers:!1,specialChars:!1,whitelist:["!",'"',"#","$","%","&","`","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","{","|","}","~"],blacklist:[]};else if(r.state=Object(K.a)({},r.props.service),r.props.service.blacklist.length>0){var s,n=["!",'"',"#","$","%","&","`","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","{","|","}","~"],i=Object(w.a)(r.props.service.blacklist);try{for(i.s();!(s=i.n()).done;){var c=s.value;n.splice(n.indexOf(c),1)}}catch(l){i.e(l)}finally{i.f()}r.state.whitelist=n}return r}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"serviceDetails"},s.a.createElement("div",{className:"p-inputgroup mt-3 mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon inputgroup-addon-edit-service"},"Name"),s.a.createElement(g.InputText,{className:"inputtext-edit-service",type:"text",value:this.state.name,name:"name",onChange:this.handleChange,placeholder:"Name"})),s.a.createElement("div",{className:"p-inputgroup mt-3 mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon inputgroup-addon-edit-service"},"URL"),s.a.createElement(g.InputText,{className:"inputtext-edit-service",type:"text",value:this.state.url,name:"url",onChange:this.handleChange,placeholder:"Url"})),s.a.createElement("div",{className:"p-inputgroup mt-3 mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon inputgroup-addon-edit-service"},"Account"),s.a.createElement(g.InputText,{className:"inputtext-edit-service",type:"text",value:this.state.account,name:"account",onChange:this.handleChange,placeholder:"Account"})),s.a.createElement("div",{className:"p-inputgroup mt-3 mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon inputgroup-addon-edit-service"},"Version"),s.a.createElement(g.InputText,{className:"inputtext-edit-service",type:"number",value:this.state.version,name:"version",onChange:this.handleChange,placeholder:"Version",min:1})),s.a.createElement("div",{className:"inputgroup-slider"},s.a.createElement("div",{className:"p-inputgroup"},s.a.createElement("span",{className:"p-inputgroup-addon inputgroup-addon-edit-service inputgroup-addon-edit-service-length"},"Length"),s.a.createElement(g.InputText,{className:"inputtext-edit-service inputtext-edit-service-length",type:"number",value:this.state.length,name:"length",onChange:this.onChangeSlider,min:8,max:100})),s.a.createElement(ne.Slider,{value:this.state.length,style:{width:"262.5px"},onChange:this.onChangeSlider,min:8,max:100})),s.a.createElement("div",{className:"inputswitch-group mt-3"},s.a.createElement("label",{className:"switch-name"},"Letters"),s.a.createElement(se.InputSwitch,{onLabel:"Yes",offLabel:"No",checked:this.state.lowercase,onChange:function(t){return e.setState({lowercase:t.value})}})),s.a.createElement("div",{className:"inputswitch-group mt-2"},s.a.createElement("label",{className:"switch-name"},"Cap. Letters"),s.a.createElement(se.InputSwitch,{onLabel:"Yes",offLabel:"No",checked:this.state.uppercase,onChange:function(t){return e.setState({uppercase:t.value})}})),s.a.createElement("div",{className:"inputswitch-group mt-2"},s.a.createElement("label",{className:"switch-name"},"Numbers"),s.a.createElement(se.InputSwitch,{onLabel:"Yes",offLabel:"No",checked:this.state.numbers,onChange:function(t){return e.setState({numbers:t.value})}})),s.a.createElement("div",{className:"inputswitch-group mt-2 mb-2"},s.a.createElement("label",{className:"switch-name"},"Spec. Chararacters"),s.a.createElement(se.InputSwitch,{onLabel:"Yes",offLabel:"No",checked:this.state.specialChars,onChange:function(t){return e.setState({specialChars:t.value})}})),this.state.specialChars?s.a.createElement(ie,{handleCharListChanges:this.handleCharListChanges,whitelist:this.state.whitelist,blacklist:this.state.blacklist}):"",s.a.createElement("div",{className:"button-container mt-2"},s.a.createElement(b.Button,{className:"mt-2",label:"Save",icon:"pi pi-check",style:{marginRight:".25em"},onClick:this.props.isOfflineMode?this.handleSubmitOffline:this.handleSubmit})))}}]),a}(s.a.Component),ce=Object(T.b)((function(e,t){return{username:e.user.username,clientSessionProof:e.user.clientSessionProof,isOfflineMode:e.user.isOfflineMode}}),(function(e){return{addService:function(t){return e(U(t))},changeService:function(t){return e(A(t))},showMessage:function(t){return e(_(t))}}}))(oe),le=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).handleDialogShow=function(){r.setState({serviceDetailsVisible:!0})},r.handleDialogHide=function(){r.setState({serviceDetailsVisible:!1})},r.handleDeleteService=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.post("/service/delete",Object(K.a)(Object(K.a)({username:r.props.username},r.props.service),{},{delete:!0,clientSessionProof:r.props.clientSessionProof}),{headers:{"Content-Type":"application/json"}});case 3:(t=e.sent)&&t.data&&t.data.deleted?(r.props.deleteService(r.props.service),r.props.showMessage({severity:"success",summary:"Sucess",detail:"Service deleted."})):r.props.showMessage({severity:"error",summary:"Error",detail:"Service could not be deleted."}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.props.showMessage({severity:"error",summary:"Error",detail:"Internal Server Error."});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),r.handleDeleteServiceOffline=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(r.props.service.id);case 3:r.props.deleteService(r.props.service),r.props.showMessage({severity:"success",summary:"Sucess",detail:"Service deleted."}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.props.showMessage({severity:"error",summary:"Error",detail:"Service could not be deleted."});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),r.handleGeneratePassword=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(r.props.masterpassword,r.props.service);case 2:(t=e.sent)?r.setState({password:t}):console.error("error");case 4:case"end":return e.stop()}}),e)}))),r.handleChangeInputType=function(){r.state.inputTypeIsPassword?(r.setState({inputType:"text"}),r.setState({showButtonIcon:"pi pi-eye-slash"}),r.setState({inputTypeIsPassword:!1}),r.setState((function(e){var t=Object(K.a)({},e);return t.items[1].label="Hide Password",t.items[1].icon="pi pi-eye-slash",t}))):(r.setState({inputType:"password"}),r.setState({showButtonIcon:"pi pi-eye"}),r.setState({inputTypeIsPassword:!0}),r.setState((function(e){var t=Object(K.a)({},e);return t.items[1].label="Show Password",t.items[1].icon="pi pi-eye",t})))},r.handleOpenURL=function(){window.open(r.props.service.url,"_blank")},r.handleCopyToClipboard=function(){var e=document.createElement("textarea");e.value=r.state.password,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},r.handleClearPassword=function(){r.setState({password:""})},r.footer=s.a.createElement("span",null,s.a.createElement(b.Button,{icon:"pi pi-cog",style:{marginRight:".25em"},onClick:r.handleDialogShow,tooltip:"Edit Service",tooltipOptions:P}),s.a.createElement(b.Button,{icon:"pi pi-trash",className:"p-button-secondary",onClick:r.props.isOfflineMode?r.handleDeleteServiceOffline:r.handleDeleteService,tooltip:"Delete Service",tooltipOptions:P})),r.props.service.url?r.state={password:"",inputType:"password",inputTypeIsPassword:!0,showButtonIcon:"pi pi-eye",copyButtonIcon:"pi pi-copy",serviceDetailsVisible:!1,items:[{label:"Generate",icon:"pi pi-fw pi-external-link",command:r.handleGeneratePassword},{label:"Show Password",icon:"pi pi-fw pi-eye",command:r.handleChangeInputType},{label:"Copy",icon:"pi pi-fw pi-copy",command:r.handleCopyToClipboard},{label:"Open URL",icon:"pi pi-fw pi-external-link",command:r.handleOpenURL},{label:"Edit",icon:"pi pi-fw pi-cog",command:r.handleDialogShow},{separator:!0},{label:"Delete",icon:"pi pi-fw pi-times",command:r.props.isOfflineMode?r.handleDeleteServiceOffline:r.handleDeleteService}]}:r.state={password:"",inputType:"password",inputTypeIsPassword:!0,showButtonIcon:"pi pi-eye",copyButtonIcon:"pi pi-copy",serviceDetailsVisible:!1,items:[{label:"Generate",icon:"pi pi-fw pi-external-link",command:r.handleGeneratePassword},{label:"Show Password",icon:"pi pi-fw pi-eye",command:r.handleChangeInputType},{label:"Copy",icon:"pi pi-fw pi-copy",command:r.handleCopyToClipboard},{label:"Edit",icon:"pi pi-fw pi-cog",command:r.handleDialogShow},{separator:!0},{label:"Delete",icon:"pi pi-fw pi-times",command:r.props.isOfflineMode?r.handleDeleteServiceOffline:r.handleDeleteService}]},r}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"serviceCard-container",onContextMenu:function(t){return e.cm.show(t)}},s.a.createElement(ae.Card,{title:this.props.service.name,footer:this.footer,className:"service-card"},""===this.props.service.account?s.a.createElement("p",{className:"service-card-account service-card-account-hidden"},"placeholder"):s.a.createElement("p",{className:"service-card-account"},this.props.service.account),s.a.createElement(g.InputText,{readOnly:!0,className:"servicePasswordInputText",type:this.state.inputType,value:this.state.password}),s.a.createElement(b.Button,{label:"Calculate",onClick:this.handleGeneratePassword}),s.a.createElement(b.Button,{icon:this.state.showButtonIcon,onClick:this.handleChangeInputType,tooltip:this.state.inputTypeIsPassword?"Show Password":"Hide Password",tooltipOptions:P}),s.a.createElement(b.Button,{icon:this.state.copyButtonIcon,onClick:this.handleCopyToClipboard,tooltip:"Copy Password",tooltipOptions:P}),s.a.createElement(b.Button,{icon:"pi pi-times",onClick:this.handleClearPassword,tooltip:"Clear Password",tooltipOptions:P})),s.a.createElement(re.ContextMenu,{model:this.state.items,ref:function(t){return e.cm=t}}),this.state.serviceDetailsVisible?s.a.createElement(Q.Dialog,{header:"Edit Service",visible:this.state.serviceDetailsVisible,modal:!0,onHide:this.handleDialogHide},s.a.createElement(ce,{service:this.props.service,handleDialogHide:this.handleDialogHide})):"")}}]),a}(s.a.Component),pe=Object(T.b)((function(e,t){return{service:e.services.find((function(e){return e.id===t.id})),masterpassword:e.user.password,username:e.user.username,clientSessionProof:e.user.clientSessionProof,isOfflineMode:e.user.isOfflineMode}}),(function(e){return{deleteService:function(t){return e(V(t))},showMessage:function(t){return e(_(t))}}}))(le);a(280);function ue(e){return new Promise((function(t,a){var r=new FileReader;r.readAsBinaryString(e),r.onload=function(){var e=r.result;t(JSON.parse(e))},r.onerror=function(){a()}}))}function de(e,t){return new Promise(function(){var a=Object(f.a)(h.a.mark((function a(r,s){var n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,q.post(e,t,{headers:{"Content-Type":"application/json"}});case 3:(n=a.sent)&&n.data&&n.data.success?r(n.data):s("response not successful"),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),s("error",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}())}var me=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).handleInputTextChanges=function(e){r.setState({keyword:e.target.value},(function(){var e,t=[],a=Object(w.a)(r.props.services);try{for(a.s();!(e=a.n()).done;){var s=e.value;s.name.includes(r.state.keyword)&&t.push(s)}}catch(n){a.e(n)}finally{a.f()}r.props.filterServices(t)}))},r.openUploadDialog=function(){r.toggleDropdownMenu(),r.fileUploadInput.current.click()},r.import=Object(f.a)(h.a.mark((function e(){var t,a,s,n,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.fileUploadInput.current.files[0]&&"application/json"===r.fileUploadInput.current.files[0].type){e.next=3;break}return r.props.showMessage({severity:"error",summary:"Upload failed!",detail:"Invalid file type. Please upload a JSON-File."}),e.abrupt("return");case 3:return e.prev=3,e.next=6,ue(r.fileUploadInput.current.files[0]);case 6:delete(t=e.sent)[0].id,a=Object(w.a)(t),e.prev=9,a.s();case 11:if((s=a.n()).done){e.next=19;break}return n=s.value,e.next=15,de("/service/save",Object(K.a)(Object(K.a)({username:r.props.username},n),{},{newService:!0,clientSessionProof:r.props.clientSessionProof}));case 15:(i=e.sent)&&i.id&&(n.id=i.id,r.props.addService(n));case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),a.e(e.t0);case 24:return e.prev=24,a.f(),e.finish(24);case 27:r.fileUploadInput.current.value=null,r.props.showMessage({severity:"success",summary:"Import complete.",detail:"Services import successful."}),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(3),r.props.showMessage({severity:"error",summary:"Upload failed!",detail:"File could not be read."});case 34:case"end":return e.stop()}}),e,null,[[3,31],[9,21,24,27]])}))),r.importOffline=Object(f.a)(h.a.mark((function e(){var t,a,s,n,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.fileUploadInput.current.files[0]&&"application/json"===r.fileUploadInput.current.files[0].type){e.next=3;break}return r.props.showMessage({severity:"error",summary:"Upload failed!",detail:"Invalid file type. Please upload a JSON-File."}),e.abrupt("return");case 3:return e.prev=3,e.next=6,ue(r.fileUploadInput.current.files[0]);case 6:delete(t=e.sent)[0].id,a=Object(w.a)(t),e.prev=9,a.s();case 11:if((s=a.n()).done){e.next=21;break}return delete(n=s.value).id,e.next=16,H(n);case 16:i=e.sent,n.id=i,r.props.addService(n);case 19:e.next=11;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(9),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:r.fileUploadInput.current.value=null,r.props.showMessage({severity:"success",summary:"Import complete.",detail:"Services import successful."}),e.next=36;break;case 33:e.prev=33,e.t1=e.catch(3),r.props.showMessage({severity:"error",summary:"Upload failed!",detail:"File could not be read."});case 36:case"end":return e.stop()}}),e,null,[[3,33],[9,23,26,29]])}))),r.export=function(){!function(e){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download","services.json"),document.body.appendChild(a),a.click(),a.remove()}(r.props.services),r.toggleDropdownMenu()},r.handleClickOutsideDropdown=function(e){e.target.parentElement&&(e.target.parentElement.matches(".dropdown-button")||e.target.parentElement.matches(".dropdown-content-item"))||r.dropdownContent.current.classList.remove("show")},r.toggleDropdownMenu=function(){r.dropdownContent.current.classList.contains("show")?r.dropdownContent.current.classList.remove("show"):r.dropdownContent.current.classList.add("show")},r.fileUploadInput=s.a.createRef(),r.dropdownContent=s.a.createRef(),r.state={keyword:""},r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutsideDropdown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutsideDropdown)}},{key:"render",value:function(){return s.a.createElement("div",{className:"control-bar"},s.a.createElement("div",{className:"row justify-content-center control-bar-row"},s.a.createElement("div",{className:"col-8 col-sm-8 col-md-8 col-lg-6 col-xl-3 control-bar-content"},s.a.createElement(b.Button,{className:"p-button-secondary button-add",icon:"pi pi-plus",onClick:this.props.handleDialogShow,tooltip:"Add Service",tooltipOptions:P}),s.a.createElement("input",{ref:this.fileUploadInput,id:"fileUpload",type:"file",accept:"application/json",onChange:this.props.isOfflineMode?this.importOffline:this.import,hidden:!0}),s.a.createElement("div",{className:"p-inputgroup control-bar-search"},s.a.createElement("span",{className:"p-inputgroup-addon"},s.a.createElement("i",{className:"pi pi-search"})),s.a.createElement(g.InputText,{type:"text",value:this.state.keyword,name:"keyword",onChange:this.handleInputTextChanges,placeholder:"Keyword"})),s.a.createElement("div",{className:"dropdown"},s.a.createElement(b.Button,{icon:"pi pi-arrow-down",className:"p-button-secondary dropdown-button",onClick:this.toggleDropdownMenu}),s.a.createElement("div",{ref:this.dropdownContent,className:"dropdown-content"},s.a.createElement(b.Button,{label:"Import",className:"p-button-secondary dropdown-content-item",icon:"pi pi-upload",onClick:this.openUploadDialog,tooltip:"Import Services from JSON-File",tooltipOptions:P}),s.a.createElement(b.Button,{label:"Export",className:"p-button-secondary dropdown-content-item",icon:"pi pi-download",onClick:this.export,tooltip:"Exports all Services to a JSON-File",tooltipOptions:P}))))))}}]),a}(s.a.Component),he=Object(T.b)((function(e){var t,a=[],r=e.user.username,s=e.user.clientSessionProof,n=e.user.isOfflineMode,i=Object(w.a)(e.services);try{for(i.s();!(t=i.n()).done;){var o=t.value;a.push(o)}}catch(c){i.e(c)}finally{i.f()}return{services:a,username:r,clientSessionProof:s,isOfflineMode:n}}),(function(e){return{addService:function(t){return e(U(t))},filterServices:function(t){return e({type:"FILTER_SERVICES",payload:t})},showMessage:function(t){return e(_(t))}}}))(me),fe=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).handleDialogShow=function(){r.setState({serviceDetailsVisible:!0})},r.handleDialogHide=function(){r.setState({serviceDetailsVisible:!1})},r.state={serviceDetailsVisible:!1},r}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"services"},s.a.createElement(he,{handleDialogShow:this.handleDialogShow}),s.a.createElement("div",{className:"servicesList"},this.props.services.map((function(e){return s.a.createElement("div",{className:"service",key:e},s.a.createElement(pe,{id:e}))}))),this.state.serviceDetailsVisible?s.a.createElement(Q.Dialog,{header:"Add Service",blockScroll:!1,visible:this.state.serviceDetailsVisible,modal:!0,onHide:this.handleDialogHide},s.a.createElement(ce,{newService:!0,handleDialogHide:this.handleDialogHide})):"")}}]),a}(s.a.Component),ve=Object(T.b)((function(e){var t,a=[],r=Object(w.a)(e.displayedServices);try{for(r.s();!(t=r.n()).done;){var s=t.value;a.push(s.id)}}catch(n){r.e(n)}finally{r.f()}return{services:a}}),(function(e){return{deleteService:function(t){return e(V(t))}}}))(fe),ge=(a(281),function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={},r}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("h1",null,"Imprint works!")}}]),a}(s.a.Component)),be=(a(282),a(137)),we=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).onAction=function(e){},r.onActive=function(e){},r.onIdle=function(){r.props.logoutUser()},r.idleTimer=null,r.state={remainingTime:""},r}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement(be.a,{ref:function(t){e.idleTimer=t},element:document,onActive:this.onActive,onIdle:this.onIdle,onAction:this.onAction,debounce:250,timeout:6e5})}}]),a}(s.a.Component),ye=Object(T.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}),(function(e){return{logoutUser:function(t){return e(B(t))}}}))(Object(d.f)(we)),Ee=(a(283),function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).handleChange=function(e){var t=e.target;r.setState(Object(v.a)({},t.name,t.value))},r.update=Object(f.a)(h.a.mark((function e(){var t,a,s,n,i,o,c,l,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r.state.mail){e.next=3;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Please type in your mail address."}),e.abrupt("return");case 3:if(r.state.mail.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)){e.next=6;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"The format of the mail is not correct."}),e.abrupt("return");case 6:if(""!==r.state.password){e.next=9;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Please type in a password."}),e.abrupt("return");case 9:if(""!==r.state.passwordMatch){e.next=12;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Please confirm your password."}),e.abrupt("return");case 12:if(r.state.password.match(/^(?=.*[0-9])(?=.*[!"#$%&`()*+,-./:;<=>?@[\\\]^{|}~])(?=.*[A-Z])[a-zA-Z0-9!"#$%&`()*+,-./:;<=>?@[\\\]^{|}~]{8,}$/)){e.next=15;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Password is to weak."}),e.abrupt("return");case 15:if(r.state.password===r.state.passwordMatch){e.next=18;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"Passwords do not match."}),e.abrupt("return");case 18:return e.prev=18,e.next=21,r.generatePBKDF2Hash(r.state.currPassword,r.props.salt+r.props.username);case 21:return t=e.sent,a=Z.deriveVerifier(t.toString("hex")),s=Z.generateSalt(),e.next=26,r.generatePBKDF2Hash(r.state.password,s+r.props.username);case 26:return n=e.sent,i=Z.deriveVerifier(n.toString("hex")),o=Z.generateEphemeral(),e.next=31,q.post("/user/update",{step:"1",username:r.props.username,mail:r.state.mail,newSalt:s,currVerifier:a,newVerifier:i,clientPublicEphemeral:o.public},{headers:{"Content-Type":"application/json"}});case 31:if(c=e.sent,console.log("res1:",c.data),c&&c.data&&c.data.stepOneComplete){e.next=36;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"User data could not be updated."}),e.abrupt("return");case 36:return l=Z.deriveSession(o.secret,c.data.serverEphemeral,s,r.props.username,n.toString("hex")),e.next=39,q.post("http://localhost:4500/user/update",{step:"2",username:r.props.username,clientSessionProof:l.proof},{headers:{"Content-Type":"application/json"}});case 39:if(p=e.sent,console.log("res2",p.data),p&&p.data&&p.data.stepTwoComplete){e.next=44;break}return r.props.showMessage({severity:"error",summary:"Error",detail:"res 2 User data could not be updated."}),e.abrupt("return");case 44:Z.verifySession(o.public,l,p.data.serverSessionProof),r.props.updateUserProof(l.proof),r.setState({currPassword:"",password:"",passwordMatch:""}),r.props.showMessage({severity:"success",summary:"Updated.",detail:"User updated."}),e.next=53;break;case 50:e.prev=50,e.t0=e.catch(18),r.props.showMessage({severity:"error",summary:"Error",detail:"Internal Server Error."});case 53:case"end":return e.stop()}}),e,null,[[18,50]])}))),r.generatePBKDF2Hash=function(e,t){return new Promise((function(a,r){y.pbkdf2(e,t,1e5,32,"sha256",(function(e,t){e&&r(),a(t)}))}))},r.state={mail:e.mail,currPassword:"",password:"",passwordMatch:""},r}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"user"},s.a.createElement("div",{className:"p-inputgroup mt-3 mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon"},s.a.createElement("i",{className:"pi pi-user"})),s.a.createElement(g.InputText,{type:"text",value:this.props.username,name:"username",disabled:!0})),s.a.createElement("div",{className:"p-inputgroup mt-3 mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon"},"@"),s.a.createElement(g.InputText,{type:"mail",value:this.state.mail,name:"mail",onChange:this.handleChange,placeholder:"E-Mail"})),s.a.createElement("div",{className:"p-inputgroup mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon"},s.a.createElement("i",{className:"pi pi-key"})),s.a.createElement(g.InputText,{type:"password",value:this.state.currPassword,name:"currPassword",onChange:this.handleChange,placeholder:"Current Password"})),s.a.createElement("div",{className:"p-inputgroup mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon"},s.a.createElement("i",{className:"pi pi-key"})),s.a.createElement(g.InputText,{type:"password",value:this.state.password,name:"password",onChange:this.handleChange,placeholder:"New Password"})),s.a.createElement("div",{className:"p-inputgroup mb-3"},s.a.createElement("span",{className:"p-inputgroup-addon"},s.a.createElement("i",{className:"pi pi-key"})),s.a.createElement(g.InputText,{type:"password",value:this.state.passwordMatch,name:"passwordMatch",onChange:this.handleChange,placeholder:"Comfirm new Password"})),s.a.createElement(b.Button,{label:"Update",icon:"pi pi-user-edit",onClick:this.update}))}}]),a}(s.a.Component)),Se=Object(T.b)((function(e){return console.log("user_component_state:",e),{username:e.user.username,mail:e.user.mail,salt:e.user.salt}}),(function(e){return{updateUserProof:function(t){return e({type:"UPDATE_CLIENTSESSIONPROOF",payload:t})},showMessage:function(t){return e(_(t))}}}))(Ee),Oe=a(138),ke=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.message&&this.growl.show(e.message)}},{key:"render",value:function(){var e=this;return s.a.createElement(u.a,null,s.a.createElement(ye,null),s.a.createElement(te,null),s.a.createElement(Oe.Growl,{ref:function(t){e.growl=t}}),s.a.createElement("main",{className:"content"},s.a.createElement(d.b,{exact:!0,path:"/",component:D}),s.a.createElement(d.b,{path:"/imprint",component:ge}),this.props.isAuthenticated?s.a.createElement(d.b,{path:"/services",component:ve}):s.a.createElement(d.a,{to:"/"}),this.props.isAuthenticated&&!this.props.isOfflineMode?s.a.createElement(d.b,{path:"/user",component:Se}):s.a.createElement(d.a,{to:"/"})),s.a.createElement("script",{src:"https://code.jquery.com/jquery-3.3.1.slim.min.js",integrity:"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo",crossOrigin:"anonymous"}),s.a.createElement("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js",integrity:"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49",crossOrigin:"anonymous"}),s.a.createElement("script",{src:"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js",integrity:"sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy",crossOrigin:"anonymous"}))}}]),a}(s.a.Component),Ce=Object(T.b)((function(e){return{isAuthenticated:e.user.isAuthenticated,isOfflineMode:e.user.isOfflineMode,message:e.message}}),null)(ke);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(286),a(287),a(288),a(289);var je=a(60),xe={user:{username:"",password:"",mail:"",salt:"",isAuthenticated:!1,clientSessionProof:"",isOfflineMode:!1},services:[],displayedServices:[],messages:{}};var Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0,a={},r=[],s=[],n={};switch(t.type){case"LOGIN_USER":return{user:a=t.payload,services:r=Object(J.a)(e.services),displayedServices:s=Object(J.a)(e.services),messages:n=Object(K.a)({},e.messages)};case"UPDATE_CLIENTSESSIONPROOF":return console.log("reducer:",t.payload),Object.assign({},e,{user:Object(K.a)(Object(K.a)({},e.user),{},{clientSessionProof:t.payload})});case"LOGOUT_USER":return Object(K.a)({},xe);case"ADD_SERVICE":return Object.assign({},e,{services:e.services.concat(t.payload),displayedServices:e.displayedServices.concat(t.payload)});case"CHANGE_SERVICE":a=Object(K.a)({},e.user),r=Object(J.a)(e.services),s=Object(J.a)(e.displayedServices),n=Object(K.a)({},e.messages);for(var i=0;i<r.length;i++)if(r[i].id===t.payload.id)return r[i]=t.payload,s[i]=t.payload,{user:a,services:r,displayedServices:s,messages:n};break;case"DELETE_SERVICE":a=Object(K.a)({},e.user),s=Object(J.a)(e.displayedServices),n=Object(K.a)({},e.messages);var o=e.services.findIndex((function(e){return e.id===t.payload.id})),c=e.displayedServices.findIndex((function(e){return e.id===t.payload.id}));if(o>=0){var l=e.services.slice(0,o),p=e.services.slice(o+1,e.services.length),u=e.displayedServices.slice(0,c),d=e.displayedServices.slice(c+1,e.displayedServices.length);return{user:a,services:r=l.concat(p),displayedServices:s=u.concat(d),messages:n}}break;case"SET_SERVICES":return{user:a=Object(K.a)({},e.user),services:r=t.payload,displayedServices:s=t.payload,messages:n=Object(K.a)({},e.messages)};case"FILTER_SERVICES":return{user:a=Object(K.a)({},e.user),services:r=Object(J.a)(e.services),displayedServices:s=t.payload,messages:n=Object(K.a)({},e.messages)};case"SHOW_MESSAGE":return{user:a=Object(K.a)({},e.user),services:r=Object(J.a)(e.services),displayedServices:s=Object(J.a)(e.displayedServices),message:t.payload};default:return e}return e},Ne=Object(je.b)(Me);window.store=Ne,window.changeService=A,window.addService=U,window.deleteService=V,i.a.render(s.a.createElement(T.a,{store:Ne},s.a.createElement(Ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[140,1,2]]]);
//# sourceMappingURL=main.c28eeed7.chunk.js.map